using ExchangeRateAPI.Model;
using Microsoft.EntityFrameworkCore;

namespace ExchangeRateAPI.Data
{
    public class ExchangeRateDbContext : DbContext
    {
        public ExchangeRateDbContext( DbContextOptions<ExchangeRateDbContext> options )
            : base(options)
        { }

        public DbSet<Currency> Currencies { get; set; }
        public DbSet<Rate> Rates { get; set; }
        public DbSet<UpdateLog> UpdateLogs { get; set; }

        protected override void OnModelCreating( ModelBuilder modelBuilder )
        {
            modelBuilder.Entity<Currency>()
                .HasMany(c => c.Rates)
                .WithOne(r => r.Currency)
                .HasForeignKey(r => r.CurrencyId)
                .OnDelete(DeleteBehavior.Cascade);

            modelBuilder.Entity<Rate>().Property(r => r.Value)
                .HasColumnType("decimal(20, 10)");

            // *** Temp seed data ***
            var currencies = new[]
            {
                new Currency { Id = 1, Symbol = "EUR", Name = "Euro" },
                new Currency { Id = 2, Symbol = "AED", Name = "United Arab Emirates Dirham" },
                new Currency { Id = 3, Symbol = "AFN", Name = "Afghan Afghani" },
                new Currency { Id = 4, Symbol = "ALL", Name = "Albanian Lek" },
                new Currency { Id = 5, Symbol = "AMD", Name = "Armenian Dram" },
                new Currency { Id = 6, Symbol = "ANG", Name = "Netherlands Antillean Guilder" },
                new Currency { Id = 7, Symbol = "AOA", Name = "Angolan Kwanza" },
                new Currency { Id = 8, Symbol = "ARS", Name = "Argentine Peso" },
                new Currency { Id = 9, Symbol = "AUD", Name = "Australian Dollar" },
                new Currency { Id = 10, Symbol = "AWG", Name = "Aruban Florin" },
                new Currency { Id = 11, Symbol = "AZN", Name = "Azerbaijani Manat" },
                new Currency { Id = 12, Symbol = "BAM", Name = "Bosnia-Herzegovina Convertible Mark" },
                new Currency { Id = 13, Symbol = "BBD", Name = "Barbadian Dollar" },
                new Currency { Id = 14, Symbol = "BDT", Name = "Bangladeshi Taka" },
                new Currency { Id = 15, Symbol = "BGN", Name = "Bulgarian Lev" },
                new Currency { Id = 16, Symbol = "BHD", Name = "Bahraini Dinar" },
                new Currency { Id = 17, Symbol = "BIF", Name = "Burundian Franc" },
                new Currency { Id = 18, Symbol = "BMD", Name = "Bermudian Dollar" },
                new Currency { Id = 19, Symbol = "BND", Name = "Brunei Dollar" },
                new Currency { Id = 20, Symbol = "BOB", Name = "Bolivian Bolíviano" },
                new Currency { Id = 21, Symbol = "BRL", Name = "Brazilian Real" },
                new Currency { Id = 22, Symbol = "BSD", Name = "Bahamian Dollar" },
                new Currency { Id = 23, Symbol = "BTC", Name = "Bitcoin" },
                new Currency { Id = 24, Symbol = "BTN", Name = "Bhutanese Ngultrum" },
                new Currency { Id = 25, Symbol = "BWP", Name = "Botswana Pula" },
                new Currency { Id = 26, Symbol = "BYN", Name = "Belarusian Ruble" },
                new Currency { Id = 27, Symbol = "BYR", Name = "Belarusian Ruble (till 2016)" },
                new Currency { Id = 28, Symbol = "BZD", Name = "Belize Dollar" },
                new Currency { Id = 29, Symbol = "CAD", Name = "Canadian Dollar" },
                new Currency { Id = 30, Symbol = "CDF", Name = "Congolese Franc" },
                new Currency { Id = 31, Symbol = "CHF", Name = "Swiss Franc" },
                new Currency { Id = 32, Symbol = "CLF", Name = "Chilean Unit of Account (UF)" },
                new Currency { Id = 33, Symbol = "CLP", Name = "Chilean Peso" },
                new Currency { Id = 34, Symbol = "CNY", Name = "Chinese Yuan" },
                new Currency { Id = 35, Symbol = "COP", Name = "Colombian Peso" },
                new Currency { Id = 36, Symbol = "CRC", Name = "Costa Rican Colón" },
                new Currency { Id = 37, Symbol = "CUC", Name = "Cuban Convertible Peso" },
                new Currency { Id = 38, Symbol = "CUP", Name = "Cuban Peso" },
                new Currency { Id = 39, Symbol = "CVE", Name = "Cape Verdean Escudo" },
                new Currency { Id = 40, Symbol = "CZK", Name = "Czech Republic Koruna" },
                new Currency { Id = 41, Symbol = "DJF", Name = "Djiboutian Franc" },
                new Currency { Id = 42, Symbol = "DKK", Name = "Danish Krone" },
                new Currency { Id = 43, Symbol = "DOP", Name = "Dominican Peso" },
                new Currency { Id = 44, Symbol = "DZD", Name = "Algerian Dinar" },
                new Currency { Id = 45, Symbol = "EGP", Name = "Egyptian Pound" },
                new Currency { Id = 46, Symbol = "ERN", Name = "Eritrean Nakfa" },
                new Currency { Id = 47, Symbol = "ETB", Name = "Ethiopian Birr" },
                new Currency { Id = 48, Symbol = "FJD", Name = "Fijian Dollar" },
                new Currency { Id = 49, Symbol = "FKP", Name = "Falkland Islands Pound" },
                new Currency { Id = 50, Symbol = "GBP", Name = "British Pound Sterling" },
                new Currency { Id = 51, Symbol = "GEL", Name = "Georgian Lari" },
                new Currency { Id = 52, Symbol = "GGP", Name = "Guernsey Pound" },
                new Currency { Id = 53, Symbol = "GHS", Name = "Ghanaian Cedi" },
                new Currency { Id = 54, Symbol = "GIP", Name = "Gibraltar Pound" },
                new Currency { Id = 55, Symbol = "GMD", Name = "Gambian Dalasi" },
                new Currency { Id = 56, Symbol = "GNF", Name = "Guinean Franc" },
                new Currency { Id = 57, Symbol = "GTQ", Name = "Guatemalan Quetzal" },
                new Currency { Id = 58, Symbol = "GYD", Name = "Guyanese Dollar" },
                new Currency { Id = 59, Symbol = "HKD", Name = "Hong Kong Dollar" },
                new Currency { Id = 60, Symbol = "HNL", Name = "Honduran Lempira" },
                new Currency { Id = 61, Symbol = "HRK", Name = "Croatian Kuna" },
                new Currency { Id = 62, Symbol = "HTG", Name = "Haitian Gourde" },
                new Currency { Id = 63, Symbol = "HUF", Name = "Hungarian Forint" },
                new Currency { Id = 64, Symbol = "IDR", Name = "Indonesian Rupiah" },
                new Currency { Id = 65, Symbol = "ILS", Name = "Israeli New Sheqel" },
                new Currency { Id = 66, Symbol = "IMP", Name = "Manx pound" },
                new Currency { Id = 67, Symbol = "INR", Name = "Indian Rupee" },
                new Currency { Id = 68, Symbol = "IQD", Name = "Iraqi Dinar" },
                new Currency { Id = 69, Symbol = "IRR", Name = "Iranian Rial" },
                new Currency { Id = 70, Symbol = "ISK", Name = "Icelandic Króna" },
                new Currency { Id = 71, Symbol = "JEP", Name = "Jersey Pound" },
                new Currency { Id = 72, Symbol = "JMD", Name = "Jamaican Dollar" },
                new Currency { Id = 73, Symbol = "JOD", Name = "Jordanian Dinar" },
                new Currency { Id = 74, Symbol = "JPY", Name = "Japanese Yen" },
                new Currency { Id = 75, Symbol = "KES", Name = "Kenyan Shilling" },
                new Currency { Id = 76, Symbol = "KGS", Name = "Kyrgyzstani Som" },
                new Currency { Id = 77, Symbol = "KHR", Name = "Cambodian Riel" },
                new Currency { Id = 78, Symbol = "KMF", Name = "Comorian Franc" },
                new Currency { Id = 79, Symbol = "KPW", Name = "North Korean Won" },
                new Currency { Id = 80, Symbol = "KRW", Name = "South Korean Won" },
                new Currency { Id = 81, Symbol = "KWD", Name = "Kuwaiti Dinar" },
                new Currency { Id = 82, Symbol = "KYD", Name = "Cayman Islands Dollar" },
                new Currency { Id = 83, Symbol = "KZT", Name = "Kazakhstani Tenge" },
                new Currency { Id = 84, Symbol = "LAK", Name = "Laotian Kip" },
                new Currency { Id = 85, Symbol = "LBP", Name = "Lebanese Pound" },
                new Currency { Id = 86, Symbol = "LKR", Name = "Sri Lankan Rupee" },
                new Currency { Id = 87, Symbol = "LRD", Name = "Liberian Dollar" },
                new Currency { Id = 88, Symbol = "LSL", Name = "Lesotho Loti" },
                new Currency { Id = 89, Symbol = "LTL", Name = "Lithuanian Litas" },
                new Currency { Id = 90, Symbol = "LVL", Name = "Latvian Lats" },
                new Currency { Id = 91, Symbol = "LYD", Name = "Libyan Dinar" },
                new Currency { Id = 92, Symbol = "MAD", Name = "Moroccan Dirham" },
                new Currency { Id = 93, Symbol = "MDL", Name = "Moldovan Leu" },
                new Currency { Id = 94, Symbol = "MGA", Name = "Malagasy Ariary" },
                new Currency { Id = 95, Symbol = "MKD", Name = "Macedonian Denar" },
                new Currency { Id = 96, Symbol = "MMK", Name = "Myanma Kyat" },
                new Currency { Id = 97, Symbol = "MNT", Name = "Mongolian Tugrik" },
                new Currency { Id = 98, Symbol = "MOP", Name = "Macanese Pataca" },
                new Currency { Id = 99, Symbol = "MRO", Name = "Mauritanian Ouguiya (till 2017)" },
                new Currency { Id = 100, Symbol = "MUR", Name = "Mauritian Rupee" },
                new Currency { Id = 101, Symbol = "MVR", Name = "Maldivian Rufiyaa" },
                new Currency { Id = 102, Symbol = "MWK", Name = "Malawian Kwacha" },
                new Currency { Id = 103, Symbol = "MXN", Name = "Mexican Peso" },
                new Currency { Id = 104, Symbol = "MYR", Name = "Malaysian Ringgit" },
                new Currency { Id = 105, Symbol = "MZN", Name = "Mozambican Metical" },
                new Currency { Id = 106, Symbol = "NAD", Name = "Namibian Dollar" },
                new Currency { Id = 107, Symbol = "NGN", Name = "Nigerian Naira" },
                new Currency { Id = 108, Symbol = "NIO", Name = "Nicaraguan Córdoba" },
                new Currency { Id = 109, Symbol = "NOK", Name = "Norwegian Krone" },
                new Currency { Id = 110, Symbol = "NPR", Name = "Nepalese Rupee" },
                new Currency { Id = 111, Symbol = "NZD", Name = "New Zealand Dollar" },
                new Currency { Id = 112, Symbol = "OMR", Name = "Omani Rial" },
                new Currency { Id = 113, Symbol = "PAB", Name = "Panamanian Balboa" },
                new Currency { Id = 114, Symbol = "PEN", Name = "Peruvian Nuevo Sol" },
                new Currency { Id = 115, Symbol = "PGK", Name = "Papua New Guinean Kina" },
                new Currency { Id = 116, Symbol = "PHP", Name = "Philippine Peso" },
                new Currency { Id = 117, Symbol = "PKR", Name = "Pakistani Rupee" },
                new Currency { Id = 118, Symbol = "PLN", Name = "Polish Zloty" },
                new Currency { Id = 119, Symbol = "PYG", Name = "Paraguayan Guarani" },
                new Currency { Id = 120, Symbol = "QAR", Name = "Qatari Rial" },
                new Currency { Id = 121, Symbol = "RON", Name = "Romanian Leu" },
                new Currency { Id = 122, Symbol = "RSD", Name = "Serbian Dinar" },
                new Currency { Id = 123, Symbol = "RUB", Name = "Russian Ruble" },
                new Currency { Id = 124, Symbol = "RWF", Name = "Rwandan Franc" },
                new Currency { Id = 125, Symbol = "SAR", Name = "Saudi Riyal" },
                new Currency { Id = 126, Symbol = "SBD", Name = "Solomon Islands Dollar" },
                new Currency { Id = 127, Symbol = "SCR", Name = "Seychellois Rupee" },
                new Currency { Id = 128, Symbol = "SDG", Name = "Sudanese Pound" },
                new Currency { Id = 129, Symbol = "SEK", Name = "Swedish Krona" },
                new Currency { Id = 130, Symbol = "SGD", Name = "Singapore Dollar" },
                new Currency { Id = 131, Symbol = "SHP", Name = "Saint Helena Pound" },
                new Currency { Id = 132, Symbol = "SLL", Name = "Sierra Leonean Leone" },
                new Currency { Id = 133, Symbol = "SOS", Name = "Somali Shilling" },
                new Currency { Id = 134, Symbol = "SRD", Name = "Surinamese Dollar" },
                new Currency { Id = 135, Symbol = "SSP", Name = "South Sudanese Pound" },
                new Currency { Id = 136, Symbol = "STD", Name = "São Tomé and Príncipe Dobra (pre-2018)" },
                new Currency { Id = 137, Symbol = "SVC", Name = "Salvadoran Colón" },
                new Currency { Id = 138, Symbol = "SYP", Name = "Syrian Pound" },
                new Currency { Id = 139, Symbol = "SZL", Name = "Swazi Lilangeni" },
                new Currency { Id = 140, Symbol = "THB", Name = "Thai Baht" },
                new Currency { Id = 141, Symbol = "TJS", Name = "Tajikistani Somoni" },
                new Currency { Id = 142, Symbol = "TMT", Name = "Turkmenistani Manat" },
                new Currency { Id = 143, Symbol = "TND", Name = "Tunisian Dinar" },
                new Currency { Id = 144, Symbol = "TOP", Name = "Tongan Pa'anga" },
                new Currency { Id = 145, Symbol = "TRY", Name = "Turkish Lira" },
                new Currency { Id = 146, Symbol = "TTD", Name = "Trinidad and Tobago Dollar" },
                new Currency { Id = 147, Symbol = "TWD", Name = "New Taiwan Dollar" },
                new Currency { Id = 148, Symbol = "TZS", Name = "Tanzanian Shilling" },
                new Currency { Id = 149, Symbol = "UAH", Name = "Ukrainian Hryvnia" },
                new Currency { Id = 150, Symbol = "UGX", Name = "Ugandan Shilling" },
                new Currency { Id = 151, Symbol = "USD", Name = "United States Dollar" },
                new Currency { Id = 152, Symbol = "UYU", Name = "Uruguayan Peso" },
                new Currency { Id = 153, Symbol = "UZS", Name = "Uzbekistan Som" },
                new Currency { Id = 154, Symbol = "VEF", Name = "Venezuelan Bolívar Fuerte (Old)" },
                new Currency { Id = 155, Symbol = "VND", Name = "Vietnamese Dong" },
                new Currency { Id = 156, Symbol = "VUV", Name = "Vanuatu Vatu" },
                new Currency { Id = 157, Symbol = "WST", Name = "Samoan Tala" }
            };
            var rates = new[]
            {
                new Rate { Id = 1, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 6 },  
                new Rate { Id = 2, Value = 1.746727M, Date = "1999-03-03", CurrencyId = 9 },  
                new Rate { Id = 3, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 10 }, 
                new Rate { Id = 4, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 13 }, 
                new Rate { Id = 5, Value = 1.089045M, Date = "1999-03-03", CurrencyId = 18 }, 
                new Rate { Id = 6, Value = 2.374996M, Date = "1999-03-03", CurrencyId = 21 }, 
                new Rate { Id = 7, Value = 2.131304M, Date = "1999-03-03", CurrencyId = 22 }, 
                new Rate { Id = 8, Value = 1.624130M, Date = "1999-03-03", CurrencyId = 24 }, 
                new Rate { Id = 9, Value = 1.179559M, Date = "1999-03-03", CurrencyId = 26 }, 
                new Rate { Id = 10, Value = 1.442242M, Date = "1999-03-03", CurrencyId = 29 },
                new Rate { Id = 11, Value = 2.283165M, Date = "1999-03-03", CurrencyId = 30 },
                new Rate { Id = 12, Value = 1.624130M, Date = "1999-03-03", CurrencyId = 31 },
                new Rate { Id = 13, Value = 2.131304M, Date = "1999-03-03", CurrencyId = 32 },
                new Rate { Id = 14, Value = 1.089045M, Date = "1999-03-03", CurrencyId = 33 },
                new Rate { Id = 15, Value = 1.089045M, Date = "1999-03-03", CurrencyId = 35 },
                new Rate { Id = 16, Value = 1.089045M, Date = "1999-03-03", CurrencyId = 38 },
                new Rate { Id = 17, Value = 1.740280M, Date = "1999-03-03", CurrencyId = 41 },
                new Rate { Id = 18, Value = 1.774681M, Date = "1999-03-03", CurrencyId = 42 },
                new Rate { Id = 19, Value = 2.283165M, Date = "1999-03-03", CurrencyId = 44 },
                new Rate { Id = 20, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 46 },
                new Rate { Id = 21, Value = 1.774681M, Date = "1999-03-03", CurrencyId = 47 },
                new Rate { Id = 22, Value = 2.131304M, Date = "1999-03-03", CurrencyId = 48 },
                new Rate { Id = 23, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 50 },
                new Rate { Id = 24, Value = 2.283165M, Date = "1999-03-03", CurrencyId = 51 },
                new Rate { Id = 25, Value = 1.774681M, Date = "1999-03-03", CurrencyId = 53 },
                new Rate { Id = 26, Value = 1.089045M, Date = "1999-03-03", CurrencyId = 54 },
                new Rate { Id = 27, Value = 2.374996M, Date = "1999-03-03", CurrencyId = 55 },
                new Rate { Id = 28, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 56 },
                new Rate { Id = 29, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 58 },
                new Rate { Id = 30, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 59 },
                new Rate { Id = 31, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 61 },
                new Rate { Id = 32, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 63 },
                new Rate { Id = 33, Value = 2.131304M, Date = "1999-03-03", CurrencyId = 64 },
                new Rate { Id = 34, Value = 2.374996M, Date = "1999-03-03", CurrencyId = 65 },
                new Rate { Id = 35, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 66 },
                new Rate { Id = 36, Value = 2.283165M, Date = "1999-03-03", CurrencyId = 68 },
                new Rate { Id = 37, Value = 1.624130M, Date = "1999-03-03", CurrencyId = 70 },
                new Rate { Id = 38, Value = 2.374996M, Date = "1999-03-03", CurrencyId = 71 },
                new Rate { Id = 39, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 72 },
                new Rate { Id = 40, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 73 },
                new Rate { Id = 41, Value = 1.624130M, Date = "1999-03-03", CurrencyId = 74 },
                new Rate { Id = 42, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 75 },
                new Rate { Id = 43, Value = 2.374996M, Date = "1999-03-03", CurrencyId = 76 },
                new Rate { Id = 44, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 78 },
                new Rate { Id = 45, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 79 },
                new Rate { Id = 46, Value = 1.946416M, Date = "1999-03-03", CurrencyId = 80 },
                new Rate { Id = 47, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 81 },
                new Rate { Id = 48, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 82 },
                new Rate { Id = 49, Value = 2.283165M, Date = "1999-03-03", CurrencyId = 84 },
                new Rate { Id = 50, Value = 2.178089M, Date = "1999-03-03", CurrencyId = 86 }
            };

            modelBuilder.Entity<Currency>().HasData(currencies);

            modelBuilder.Entity<Rate>().HasData(rates);

            modelBuilder.Entity<UpdateLog>().HasData(
                new UpdateLog { Id = 1, DbUpdateDate = DateTime.Now.ToString(), ApiCallSuccess = "NA", Message = "DB Created" }
            );
        }
    }
}